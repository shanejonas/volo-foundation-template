(function(a){var b=!1;a("a[data-reveal-id]").live("click",function(b){b.preventDefault();var c=a(this).attr("data-reveal-id");a("#"+c).reveal(a(this).data())}),a.fn.reveal=function(c){var d={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",open:a.noop,opened:a.noop,close:a.noop,closed:a.noop};return c=a.extend({},d,c),this.each(function(){function j(){g=!1}function k(){g=!0}function l(c){var d=a(".reveal-modal.open");d.length===1&&(b=!0,a(".reveal-modal.open").trigger("reveal:close"))}function m(){g||(k(),l(d),d.addClass("open"),c.animation==="fadeAndPop"&&(d.css({top:a(document).scrollTop()-f,opacity:0,visibility:"visible",display:"block"}),h.fadeIn(c.animationSpeed/2),d.delay(c.animationSpeed/2).animate({top:a(document).scrollTop()+e+"px",opacity:1},c.animationSpeed,function(){d.trigger("reveal:opened")})),c.animation==="fade"&&(d.css({opacity:0,visibility:"visible",display:"block",top:a(document).scrollTop()+e}),h.fadeIn(c.animationSpeed/2),d.delay(c.animationSpeed/2).animate({opacity:1},c.animationSpeed,function(){d.trigger("reveal:opened")})),c.animation==="none"&&(d.css({visibility:"visible",display:"block",top:a(document).scrollTop()+e}),h.css({display:"block"}),d.trigger("reveal:opened")))}function n(){g||(k(),d.removeClass("open"),c.animation==="fadeAndPop"&&(d.animate({top:a(document).scrollTop()-f+"px",opacity:0},c.animationSpeed/2,function(){d.css({top:e,opacity:1,visibility:"hidden",display:"none"})}),b?d.trigger("reveal:closed"):h.delay(c.animationSpeed).fadeOut(c.animationSpeed,function(){d.trigger("reveal:closed")}),b=!1),c.animation==="fade"&&(d.animate({opacity:0},c.animationSpeed,function(){d.css({opacity:1,visibility:"hidden",display:"none",top:e})}),b?d.trigger("reveal:closed"):h.delay(c.animationSpeed).fadeOut(c.animationSpeed,function(){d.trigger("reveal:closed")})),c.animation==="none"&&(d.css({visibility:"hidden",display:"block",top:e}),b||h.css({display:"none"}),d.trigger("reveal:closed")))}function o(){d.unbind(".reveal"),h.unbind(".reveal"),a("."+c.dismissModalClass).unbind(".reveal"),a("body").unbind(".reveal")}var d=a(this),e=parseInt(d.css("top"),10),f=d.height()+e,g=!1,h=a(".reveal-modal-bg"),i;h.length===0&&(h=a('<div class="reveal-modal-bg" />').insertAfter(d),h.fadeTo("fast",.8)),d.bind("reveal:open.reveal",m),d.bind("reveal:close.reveal",n),d.bind("reveal:opened.reveal reveal:closed.reveal",j),d.bind("reveal:closed.reveal",o),d.bind("reveal:open.reveal",c.open),d.bind("reveal:opened.reveal",c.opened),d.bind("reveal:close.reveal",c.close),d.bind("reveal:closed.reveal",c.closed),d.trigger("reveal:open"),i=a("."+c.dismissModalClass).bind("click.reveal",function(){d.trigger("reveal:close")}),c.closeOnBackgroundClick&&(h.css({cursor:"pointer"}),h.bind("click.reveal",function(){d.trigger("reveal:close")})),a("body").bind("keyup.reveal",function(a){a.which===27&&d.trigger("reveal:close")})})}})(jQuery)